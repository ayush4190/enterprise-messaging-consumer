const { FILES, MODEL_FILES } = require("../constants");

module.exports = {
  /**
   * Checks whether the given filePath matches a regex `files`
   * @param {string} filePath
   * @returns boolean
   */
  isValidFile: function (filePath, fileType) {
    const genRegex = (key) => new RegExp(`${key.map((file) => file.replace("*", "")).join("$|")}$`);
    let isValid = false;
    switch(fileType) {
      case 'MODEL_FILES':
        isValid = genRegex(MODEL_FILES).test(filePath);
        break;
      case 'FILES': 
        isValid = genRegex(FILES).test(filePath);
        break;
    }
    return isValid;
  },
  /**
   * Checks whether the plugin is run via VS Code ESLint extension
   * @returns boolean
   */
  isVSCodeEditor() {
    return process.argv.join(" ").includes("dbaeumer.vscode-eslint");
  },

  /**
   * Checks whether ESLint is running in debug mode
   * @returns boolean
   */
  hasDebugFlag() {
    return process.argv.includes("--debug");
  },

  /**
   * Returns an array of allowed file extensions
   * the plugin can parse of the form "*.ext"
   * @returns {ConfigOverrideFiles} Array of file extensions
   */
  getFileExtensions: function() {
    return FILES;
  },

};
