---
modules:
  - name: {{cap.appName}}-srv
    type: {{cap.pLanguage}}
    requires:
      - name: {{cap.appName}}-db

{{^cap.isMultitenant}}
  - name: {{cap.appName}}-db-deployer
    type: hdb
    path: {{& cap.db.0.path}}
    parameters:
      buildpack: nodejs_buildpack
    requires:
      - name: {{cap.appName}}-db
{{/cap.isMultitenant}}

resources:
 - name: {{cap.appName}}-db
{{^cap.isMultitenant}}
   type: com.sap.xs.hdi-container
   parameters:
     service: hana # or 'hanatrial' on trial landscapes
     service-plan: hdi-shared
{{/cap.isMultitenant}}
{{#cap.isMultitenant}} {{! enable automatic switching to 'hanatrial' on trial accounts}}
   type: org.cloudfoundry.managed-service
   parameters:
     service: service-manager
     service-plan: container
{{/cap.isMultitenant}}
{{#cap.isJava}}
   properties:
     hdi-service-name: ${service-name}
{{/cap.isJava}}
